title: $:/snippets/peek-stylesheets

\procedure expandable-content()
<$wikify name="styles" text={{!!text}}>
<$codeblock code=<<styles>> language="css"/>
</$wikify>
\end

\procedure toggle-content()
<$parameters openState="" open="[<openState>substitute[]get[text]else[no]]" openImage="$:/core/images/down-arrow" closedImage="$:/core/images/right-arrow" openCaption="" closedCaption="">
<%if [<openState>!is[blank]] %>
<$checkbox tiddler={{{ [<openState>substitute[]] }}} field="text" checked="yes" style.appearance="none">
<span style.cursor="pointer">
<%if [subfilter<open>match[yes]] %>
<$transclude $tiddler=<<openImage>> size="1em" /> <<openCaption>>
<%else%>
<$transclude $tiddler=<<closedImage>> size="1em" /> <<closedCaption>>
<%endif%>
</span>
</$checkbox>
<%endif%>
</$parameters>
\end

\procedure expandable-list()
\whitespace trim
<$parameters filter="" openState="" open="[<openState>substitute[]get[text]else[no]]">
<ol>
<$list filter=<<filter>> >
<li>
<$transclude $variable="toggle-content" open=<<open>> openState=<<openState>> />
<$link/>
<%if [subfilter<open>match[yes]]%>
<<expandable-content>>
<%endif%>
</li>
</$list>
</ol>
</$parameters>
\end

<$let modeState=`$:/state/peek-stylesheets/mode/$(qualify)$` mode={{{ [<modeState>get[text]else[expand]] }}} listFilter="[all[shadows+tiddlers]tag[$:/tags/Stylesheet]!has[draft.of]]">

<$transclude $variable="toggle-content" openImage="$:/core/images/chevron-right" closedImage="$:/core/images/chevron-down" openState=<<modeState>> openCaption={{$:/language/ControlPanel/Stylesheets/Expand/Caption}} closedCaption={{$:/language/ControlPanel/Stylesheets/Restore/Caption}}/>

<%if [<mode>match[expand]]%>
<$transclude $variable="expandable-list" filter=<<listFilter>> open="yes"/>
<%else%>
<$transclude $variable="expandable-list" filter=<<listFilter>> openState="$:/state/peek-tiddler/open/$(currentTiddler)$$(qualify)$"/>
<%endif%>

</$let>